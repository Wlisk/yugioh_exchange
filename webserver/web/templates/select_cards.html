<div class="text-center pt-12 mx-auto">
  <h1 class="text-4xl md:text-5xl font-bold text-purple-900 mb-6">
    Trocar Cartas
  </h1>
</div>

<hr class="border-t border-gray-200 my-6">

<div style="float: left; width: 40%;">
  <h2 class="text-center text-5xl mb-4 text-purple-900 font-bold"> 
    Quer
  </h2>

  <div class="overflow-hidden rounded-md border-2 border-purple-900 h-[250px]">
    
    <!-- DIV com a lista de cartas que quer -->
    <div id="selectedWantedCards" class="h-full w-full bg-purple-200/60 overflow-x-auto overflow-y-hidden inline-flex">
      <p id="textWantedCards" class="text-xl text-center text-black my-auto mx-auto shrink-0 px-4">Selecione abaixo as cartas que você deseja receber</p>
      <p id="errorWantedCards" class="text-xl text-center text-red-600 my-auto mx-auto shrink-0 px-4" hidden="true">Selecione pelo menos uma carta abaixo</p>
    </div>
  </div>

  <div class="mt-6"><h2>Escolha as cartas desejadas:</h2></div>
  <div class="overflow-hidden rounded-md border-2 border-purple-900">
    <div class="w-full h-[500px] overflow-y-auto bg-white rounded-lg shadow-lg shadow-gray-500 border border-gray-200">
      <div style="margin: 5px;">
        <button type="button" onclick="hideFilter(document.getElementById('filter-div'), document.getElementById('filter-arrow-icon'))" id="filter-toggle-button" class="inline-flex items-center justify-left w-auto text-purple-900 font-bold mb-2 py-2 px-4 rounded hover:bg-purple-200 transition-colors">
          Filtros
          <svg id="filter-arrow-icon" class="self-end ml-2 h-5 w-5 transition-transform duration-300" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor">
            <path fill-rule="evenodd" d="M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z" clip-rule="evenodd" />
          </svg>
        </button>
        <div id="filter-div" style="display: none;" class="bg-gray-100 px-4 py-2 rounded-md shadow-md shadow-gray-500/50 border-1 border-gray-600">
          <div class="grid grid-cols-1 md:grid-cols-3 gap-6">
            <div>
              <label for="name_query" class="block text-sm font-medium text-gray-900">Nome da Carta</label>
              <input 
                type="text" 
                name="name_query" 
                id="name_query"
                class="mt-1 block w-full px-3 py-2 bg-white border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-purple-500 focus:border-purple-500"
                placeholder="Ex: Dark Magician"
              >
            </div>
            <div>
              <label for="card_type" class="block text-sm font-medium text-gray-900">Tipo de Carta</label>
              <select 
                name="card_type" 
                id="card_type" 
                class="mt-1 block w-full px-3 py-2 bg-white border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-purple-500 focus:border-purple-500"
              >
              <option value="">Todos os Tipos</option>
              <option value="Spell">Spell</option>
              <option value="Monster">Monster</option>
              <option value="Trap">Trap</option>
              </select>
            </div>
            <div>
              <label for="monster_type" class="block text-sm font-medium text-gray-900">Tipo de Monstro</label>
              <select 
                name="monster_type" 
                id="monster_type"
                class="mt-1 block w-full px-3 py-2 bg-white border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-purple-500 focus:border-purple-500"
              >
                <option value="">Todos os Monstros</option>
                <option value="Aqua">Aqua</option>
                <option value="Beast">Beast</option>
                <option value="Beast-Warrior">Beast Warrior</option>
                <option value="Creator God">Creator God</option>
                <option value="Cyberse">Cyberse</option>
                <option value="Dinosaur">Dinosaur</option>
                <option value="Divine-Beast">Divine Beast</option>
                <option value="Dragon">Dragon</option>
                <option value="Fairy">Fairy</option>
                <option value="Fiend">Fiend</option>
                <option value="Fish">Fish</option>
                <option value="Insect">Insect</option>
                <option value="Machine">Machine</option>
                <option value="Plant">Plant</option>
                <option value="Psychic">Psychic</option>
                <option value="Pyro">Pyro</option>
                <option value="Reptile">Reptile</option>
                <option value="Rock">Rock</option>
                <option value="Sea Serpent">Sea Serpent</option>
                <option value="Spellcaster">Spellcaster</option>
                <option value="Thunder">Thunder</option>
                <option value="Warrior">Warrior</option>
                <option value="Winged Beast">Winged Beast</option>
                <option value="Wyrm">Wyrm</option>
                <option value="Zombie">Zombie</option>
              </select>
            </div>
          </div>
          <button type="button" onclick="filterApply(document.getElementById('name_query'), document.getElementById('card_type'), document.getElementById('monster_type'), false, true)" class="mt-3 px-4 py-2 bg-purple-600 text-white font-medium rounded-md hover:bg-purple-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-purple-500">
            Aplicar filtros
          </button>
          <button type="button" onclick="filterApply(document.getElementById('name_query'), document.getElementById('card_type'), document.getElementById('monster_type'), true, true)" id="clear-filters-btn" class="mt-3 ml-2 px-4 py-2 bg-gray-300 text-gray-800 font-medium rounded-md hover:bg-gray-400 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-gray-500">
            Limpar filtros
          </button>
        </div>
      </div>
      <div id="wantedCardList" class="grid grid-cols-1 sm:grid-cols-3 md:grid-cols-3 lg:grid-cols-3 gap-4 m-5">
        {% include "select_cards_wanted.html" %}
      </div>
    </div>
  </div>
</div>

<div style="float: right; width: 40%;">
  <h2 class="text-center text-5xl mb-4 text-purple-900 font-bold"> 
    Oferece
  </h2>

  <div class="overflow-hidden rounded-md border-2 border-purple-900 h-[250px]">
    
    <!-- DIV com a lista de cartas que oferece -->
    <div id="selectedOfferedCards" class="h-full w-full bg-purple-200/60 overflow-x-auto overflow-y-hidden inline-flex">
      <p id="textOfferedCards" class="text-xl text-center text-black my-auto mx-auto shrink-0 px-4">Selecione abaixo as cartas que você pretende trocar</p>
      <p id="errorOfferedCards" class="text-xl text-center text-red-600 my-auto mx-auto shrink-0 px-4" hidden="true">Selecione pelo menos uma carta abaixo</p>
    </div>
  </div>

  <div class="mt-6"><h2>Escolha as cartas que você oferece:</h2></div>
  <div class="h-[500px] overflow-hidden rounded-md border-2 border-purple-900">
    <div class="w-full h-full overflow-y-auto bg-white rounded-lg shadow-lg shadow-gray-500 border border-gray-200">
      <div style="margin: 5px;">
        <button type="button" onclick="hideFilter(document.getElementById('filter-div-offer'), document.getElementById('filter-arrow-icon-offer'))" id="filter-toggle-button" class="inline-flex items-center justify-left w-auto text-purple-900 font-bold mb-2 py-2 px-4 rounded hover:bg-purple-200 transition-colors">
          Filtros
          <svg id="filter-arrow-icon-offer" class="self-end ml-2 h-5 w-5 transition-transform duration-300" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor">
            <path fill-rule="evenodd" d="M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z" clip-rule="evenodd" />
          </svg>
        </button>
        <div id="filter-div-offer" style="display: none;" class="bg-gray-100 px-4 py-2 rounded-md shadow-md shadow-gray-500/50 border-1 border-gray-600">
          <div class="grid grid-cols-1 md:grid-cols-3 gap-6">
            <div>
              <label for="name_query_offer" class="block text-sm font-medium text-gray-900">Nome da Carta</label>
              <input 
                type="text" 
                name="name_query_offer" 
                id="name_query_offer"
                class="mt-1 block w-full px-3 py-2 bg-white border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-purple-500 focus:border-purple-500"
                placeholder="Ex: Dark Magician"
              >
            </div>
            <div>
              <label for="card_type_offer" class="block text-sm font-medium text-gray-900">Tipo de Carta</label>
              <select 
                name="card_type_offer" 
                id="card_type_offer" 
                class="mt-1 block w-full px-3 py-2 bg-white border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-purple-500 focus:border-purple-500"
              >
                <option value="">Todos os Tipos</option>
                <option value="Spell">Spell</option>
                <option value="Monster">Monster</option>
                <option value="Trap">Trap</option>
              </select>
            </div>
            <div>
              <label for="monster_type_offer" class="block text-sm font-medium text-gray-900">Tipo de Monstro</label>
              <select 
                name="monster_type_offer" 
                id="monster_type_offer"
                class="mt-1 block w-full px-3 py-2 bg-white border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-purple-500 focus:border-purple-500"
              >
                <option value="">Todos os Monstros</option>
                <option value="Aqua">Aqua</option>
                <option value="Beast">Beast</option>
                <option value="Beast-Warrior">Beast Warrior</option>
                <option value="Creator God">Creator God</option>
                <option value="Cyberse">Cyberse</option>
                <option value="Dinosaur">Dinosaur</option>
                <option value="Divine-Beast">Divine Beast</option>
                <option value="Dragon">Dragon</option>
                <option value="Fairy">Fairy</option>
                <option value="Fiend">Fiend</option>
                <option value="Fish">Fish</option>
                <option value="Insect">Insect</option>
                <option value="Machine">Machine</option>
                <option value="Plant">Plant</option>
                <option value="Psychic">Psychic</option>
                <option value="Pyro">Pyro</option>
                <option value="Reptile">Reptile</option>
                <option value="Rock">Rock</option>
                <option value="Sea Serpent">Sea Serpent</option>
                <option value="Spellcaster">Spellcaster</option>
                <option value="Thunder">Thunder</option>
                <option value="Warrior">Warrior</option>
                <option value="Winged Beast">Winged Beast</option>
                <option value="Wyrm">Wyrm</option>
                <option value="Zombie">Zombie</option>
              </select>
            </div>
          </div>
          <button type="button" onclick="filterApply(document.getElementById('name_query_offer'), document.getElementById('card_type_offer'), document.getElementById('monster_type_offer'), false, false)" class="mt-3 px-4 py-2 bg-purple-600 text-white font-medium rounded-md hover:bg-purple-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-purple-500">
            Aplicar filtros
          </button>
          <button type="button" onclick="filterApply(document.getElementById('name_query_offer'), document.getElementById('card_type_offer'), document.getElementById('monster_type_offer'), true, false)" id="clear-filters-btn-offer" class="mt-3 ml-2 px-4 py-2 bg-gray-300 text-gray-800 font-medium rounded-md hover:bg-gray-400 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-gray-500">
            Limpar filtros
          </button>
        </div>
      </div>
      <div id="offerCardList" class="grid grid-cols-1 sm:grid-cols-3 md:grid-cols-3 lg:grid-cols-3 gap-4 m-5">
        {% include "select_cards_offer.html" %}
      </div>
    </div>
  </div>
</div>
    
<div style="text-align: center;">
  <button id="continueButton" type="submit" onclick="submitOffer()" class="px-6 py-3 bg-emerald-500 text-white hover:bg-emerald-600 font-medium rounded-lg focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-emerald-600">
    Fazer Oferta
  </button>
</div>
<div style="clear: both;" class="text-center mt-8"></div>

{{ userCards|json_script:"user-cards" }}